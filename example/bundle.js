!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=[{character:"ishimaru",sprite:12,duration:500,up:[0,0,1],position:{r:5,p:.687,z:17},lookat:{r:26,p:.718,z:15.7}},{duration:600,position:{r:11.5,p:.7544,z:16.55},lookat:{r:26,p:.718,z:15.7}},{duration:2100,position:{r:12.1,p:.7544,z:16.55},lookat:{r:26,p:.718,z:15.7}},{character:"hagakure",sprite:13,duration:500,route:"circular",position:[-7.59,-8.79,16],lookat:[-10.12,-14.4,16]},{duration:2300,position:[-4.65,-10.64,16],lookat:[-7.85,-15.75,16]},{character:"togami",sprite:10,duration:500,route:"circular",position:[-13.82,-2.21,16.5],lookat:[-17.4,-4.6,16]},{duration:2300,position:[-13.82,-2.21,17],lookat:[-17.4,-4.6,17]},{character:"asahina",sprite:7,duration:500,route:"circular",position:[1,-5,14],lookat:[18,-49,16]},{duration:2300,position:[4,-10,14]},{character:"fujisaki",sprite:13,duration:500,position:[-6,-6,13],lookat:[-12,-13,13]},{duration:2300,position:[-6.33,-5.65,13],lookat:[-12.72,-12.29,13]},{character:"fujisaki",sprite:16,duration:500,position:[19.17,44,21],lookat:[-15.54,-8.46,13]},{duration:2300,fov:12,position:[16.04,45.24,21],lookat:[-13.55,-11.37,13]}],e.exports=n["default"]},{}],2:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=t("promise-polyfill"),o=(r(i),t("../src/Trial.js")),a=r(o),s=t("../src/Courtroom.js"),u=r(s),c=t("../src/Animacion.js"),l=r(c),h=t("./demo.debate.js"),f=r(h);document.addEventListener("DOMContentLoaded",function(){function t(){o=!1,l["default"].stop(),document.getElementById("boton").textContent="Reiniciar",new l["default"](r).tutorial(),i=r.changeStage("discussion"),i.speaker="narrator",i.text="This is a very early preview test for the DRTrial project. Press the button in the corner to start."}var e=window.innerWidth,n=Math.floor(9/16*e);n>window.innerHeight&&(n=window.innerHeight,e=Math.floor(16/9*n));var r=new a["default"](e,n);r.courtroom=new u["default"],[{id:"naegi",name:"Makoto Naegi"},{id:"maizono",name:"Sayaka Maizono"},{id:"ishimaru",name:"Kiyotaka Ishimaru"},{id:"enoshima",name:"Junko Enoshima"},{id:"oogami",name:"Sakura Oogami"},{id:"kirigiri",name:"Kyouko Kirigiri"},{id:"oowada",name:"Mondo Oowada"},{id:"asahina",name:"Aoi Asahina"},null,{id:"hagakure",name:"Yasuhiro Hagakure"},{id:"fujisaki",name:"Chihiro Fujisaki"},{id:"togami",name:"Byakuya Togami"},{id:"celes",name:"Celestia Ludenberg"},{id:"kuwata",name:"Leon Kuwata"},{id:"fukawa",name:"Touko Fukawa"},{id:"yamada",name:"Hifumi Yamada"}].forEach(r.setCharacter,r),r.appendCanvasTo("body").setupHUD("body");var i,o;document.getElementById("boton").addEventListener("click",function(){o=!o,o?(this.textContent="Detener",new l["default"](r).tutorialToNSD().iniciarNSD(["Tsumiki’s Examination Results","Nidai’s Testimony","Mioda’s Testimony","Nanami’s Testimony","Souda’s Testimony"]).loadScript(f["default"]).delay(2e3).promise.then(t,function(e){t(),console.error(e.stack)})):t()},!1),t()},!1)},{"../src/Animacion.js":4,"../src/Courtroom.js":7,"../src/Trial.js":17,"./demo.debate.js":1,"promise-polyfill":3}],3:[function(t,e,n){!function(t){function n(t,e){return function(){t.apply(e,arguments)}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(t,n(o,this),n(a,this))}function i(t){var e=this;return null===this._state?void this._deferreds.push(t):void l(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var r;try{r=n(e._value)}catch(i){return void t.reject(i)}t.resolve(r)})}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void c(n(e,t),n(o,this),n(a,this))}this._state=!0,this._value=t,s.call(this)}catch(r){a.call(this,r)}}function a(t){this._state=!1,this._value=t,s.call(this)}function s(){for(var t=0,e=this._deferreds.length;e>t;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function u(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function c(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(i){if(r)return;r=!0,n(i)}}var l="function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=this;return new r(function(r,o){i.call(n,new u(t,e,r,o))})},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&h(arguments[0])?arguments[0]:arguments);return new r(function(e,n){function r(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(o,t)},n)}t[o]=a,0===--i&&e(t)}catch(u){n(u)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var r=0,i=t.length;i>r;r++)t[r].then(e,n)})},r._setImmediateFn=function(t){l=t},"undefined"!=typeof e&&e.exports?e.exports=r:t.Promise||(t.Promise=r)}(this)},{}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("promise-polyfill"),s=r(a),u=t("./Coordenada.js"),c=r(u),l=t("./easing.js"),h=r(l),f=t("./interprete.js"),p=r(f),d=function(){function t(e){i(this,t),this.trial=e,this.promise=s["default"].resolve(!0)}return o(t,[{key:"loadScript",value:function(t){var e=this;return t.forEach(function(t){"sprite"in t&&e.changeSprite(t.character,t.sprite),e.transicion(t)}),this}},{key:"delay",value:function(t){return this.promise=this.promise.then(function(){return new s["default"](function(e,n){setTimeout(e,t)})}),this}},{key:"changeSprite",value:function(t,e){return this.trial.characters[t].changeSprite(e),this}},{key:"cortarHacia",value:function(e){var n=this.trial;return this.promise=this.promise.then(function(){cancelAnimationFrame(t.cuadro),"fov"in e&&(n.mainCamera.fov=e.fov,n.mainCamera.updateProjectionMatrix()),"up"in e&&n.mainCamera.up.copy(e.up),"position"in e&&n.mainCamera.position.copy(e.position),"lookat"in e&&n.mainCamera.lookAt(e.lookat.threeJsVector),n.render()}),this}},{key:"transicion",value:function(e){return e.trial=this.trial,this.promise=this.promise.then(function(){var n=e.trial,r=e.duration||10,i=h["default"][e.easing]||h["default"].linear,o={};return"fov"in e&&(o.fov=new p["default"].FOV(e)),"up"in e&&(o.up=new p["default"].Up(e)),"position"in e&&(o.position=new p["default"].Position(e)),"lookat"in e&&(o.lookat=new p["default"].LookAt(e)),e=null,new s["default"](function(e,a){function s(a){a=a||("performance"in window?performance.now():Date.now());var c=Math.min(1,(a-u)/r),l=i(c);"fov"in o&&o.fov.apply(l),"up"in o&&o.up.apply(l),"position"in o&&o.position.apply(l),"lookat"in o&&o.lookat.apply(l),n.render(),1>c?t.cuadro=requestAnimationFrame(s):(o=i=r=null,u=a=null,c=l=null,e())}var u;cancelAnimationFrame(t.cuadro),u="performance"in window?performance.now():Date.now(),s(u)})}),this}},{key:"tutorial",value:function(){var e,n,r=this.trial;return r.mainCamera.up.set(0,0,1),r.mainCamera.fov=40,r.mainCamera.updateProjectionMatrix(),n=function(i){var o=(i-e)/1e3,a=.04*o*Math.PI,s=Math.sin(a),u=Math.cos(a);r.mainCamera.position.set(-28*u,-28*s,33),r.mainCamera.lookAt(new THREE.Vector3(19*u,19*s,9)),r.render(),t.cuadro=requestAnimationFrame(n)},this.promise=this.promise.then(function(r,i){cancelAnimationFrame(t.cuadro),e="performance"in window?performance.now():Date.now(),n(e)}),this}},{key:"cuestionamiento",value:function(){return this.cortarHacia({fov:40,up:new c["default"]([0,0,1]),position:new c["default"]({r:3,p:1.5707963267,z:14}),lookat:new c["default"]({r:19,p:1.5707963267,z:13})}).transicion({duration:600,position:new c["default"]({r:1,p:1.5707963267,z:14}),lookat:new c["default"]({r:19,p:1.5707963267,z:13}),easing:"inOutQuad"}).transicion({duration:600,fov:60,position:new c["default"]({r:10,p:1.5707963267,z:15}),lookat:new c["default"]({r:19,p:1.5707963267,z:13.4}),easing:"inOutQuad"})}}]),t}();Object.defineProperties(d,{cuadro:{value:0,writable:!0},step:{value:function(t){this.cuadro=requestAnimationFrame(t)},writable:!1},stop:{value:function(){cancelAnimationFrame(this.cuadro)},writable:!1}}),n["default"]=d,e.exports=n["default"]},{"./Coordenada.js":6,"./easing.js":18,"./interprete.js":19,"promise-polyfill":3}],5:[function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){this.needsUpdate=!0}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(){function t(e,n){i(this,t),this.id=e.id,this.name=e.name,this.position=n,this.texture=new THREE.Texture(new Image),this.texture.image.onload=o.bind(this.texture),this.changeSprite(1),this.card=new c(this)}return s(t,[{key:"changeSprite",value:function(t){this.sprite=t,this.texture.image.src=this.textureUri}},{key:"textureUri",get:function(){return t.TEXTURE_SRC_URI+this.id+"/"+this.sprite+".png"}}]),t}();u.TEXTURE_SRC_URI="/resources/sprites/";var c=function(t){function e(t){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var n=t.position/16*(2*Math.PI),r=Math.sin(n),o=Math.cos(n),s=new THREE.Mesh(e.geometry,new THREE.MeshBasicMaterial({color:16777215,map:t.texture,transparent:!0,side:THREE.FrontSide})),u=new THREE.Mesh(e.geometry,new THREE.MeshBasicMaterial({color:0,map:t.texture,transparent:!0,side:THREE.BackSide}));s.position.x=.02,u.position.x=-.02,this.rotation.x=Math.PI/2,this.rotation.y=-n,this.position.set(22*r,22*o,11),this.add(s,u),n=null,r=o=null,s=u=null}return r(e,t),e}(THREE.Object3D);c.geometry=new THREE.PlaneBufferGeometry(10,20),Object.defineProperty(u,"Card",{value:c,writable:!1}),n["default"]=u,e.exports=n["default"]},{}],6:[function(t,e,n){"use strict";function r(t){this._x=0,this._y=0,this._z=0,this.esferica=t.esferica||!!t[4],this.cx=t.cx||0,this.cy=t.cy||0,this.cz=t.cz||0,t instanceof r?(this._x=t._x,this._y=t._y,this._z=t._z):t.hasOwnProperty("x")?(this._x=t.x,this._y=t.y,this._z=t.z):t.hasOwnProperty("t")?(this.esferica=!0,this.setEsferica(t)):t.hasOwnProperty("p")?(this.setPolar(t),this.z=t.z):Array.isArray(t)&&(this._x=t[0],this._y=t[1],this._z=t[2])}Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperties(r.prototype,{toString:{writable:!1,value:function(){return JSON.stringify(this.vectorThree)}},x:{get:function(){return this._x-this.cx},set:function(t){this._x=this.cx+t}},y:{get:function(){return this._y-this.cy},set:function(t){this._y=this.cy+t}},z:{get:function(){return this._z-this.cz},set:function(t){this._z=this.cz+t}},r:{get:function(){var t=this._x-this.cx,e=this._y-this.cy,n=this._z-this.cz;return Math.sqrt(t*t+e*e+(this.esferica?n*n:0))},set:function(t){this.esferica?this.setEsferica(t,this.t,this.p):this.setPolar(t,this.p)}},t:{get:function(){var t=this._x-this.cx,e=this._y-this.cy,n=this._z-this.cz;return Math.acos(n/Math.sqrt(t*t+e*e+n*n))},set:function(t){this.setEsferica(this.r,t,this.p)}},p:{get:function(){return Math.atan2(this._y-this.cy,this._x-this.cx)},set:function(t){this.esferica?this.setEsferica(this.r,this.t,t):this.setPolar(this.r,t)}},centro:{get:function(){return[this.cx,this.cy,this.cz]},set:function(t){this.cx=t.x||t[0],this.cy=t.y||t[1],this.cz=t.z||t[2]}},vectorThree:{get:function(){return new THREE.Vector3(this.x,this.y,this.z)}},setEsferica:{value:function(t,e,n){t.hasOwnProperty("t")&&t.hasOwnProperty("p")&&(n=t.p,e=t.t,t=t.r),this._x=this.cx+t*Math.sin(e)*Math.cos(n),this._y=this.cy+t*Math.sin(e)*Math.sin(n),this._z=this.cz+t*Math.cos(e)}},setPolar:{value:function(t,e){t.hasOwnProperty("p")&&(e=t.p,t=t.r),this._x=this.cx+t*Math.cos(e),this._y=this.cy+t*Math.sin(e)}}}),n["default"]=r,e.exports=n["default"]},{}],7:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=new THREE.Texture(new Image);return e.image.onload=s.bind(e),e.image.src=v.TEXTURE_RELATIVE_URI+t,e}function s(){this.needsUpdate=!0}Object.defineProperty(n,"__esModule",{value:!0});var u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},h=t("./CylinderBufferGeometry.js"),f=r(h),p=t("./PlatformBufferGeometry.js"),d=r(p),E=t("./StandGeometry.js"),y=r(E),v=function(t){function e(t,n){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),u={WALLPAPER:a("chapter1-wallpaper.png"),BASEBOARD:a("chapter1-guardapolvo.png"),REDCARPET:a("alfombraR.png"),CURTAIN:a("chapter1-salida.png"),COLUMN:a("chapter1-marcos.png"),WOOD:a("wood.jpg"),CLOUDS:a("clouds.jpg")},t=t||120,n=n||80,this.add(new w(2*t,22),new m(8,n,t),new T(8,t-1).setCarpets(10,100).setCurtains(48).setPillars(3,n),new b,new H)}return o(e,t),e}(THREE.Object3D),w=function(t){function e(t,n){i(this,e);var r,o,a,s,u;for(t=t||120,n=n||18,r=new THREE.MeshFaceMaterial([new THREE.MeshLambertMaterial({color:0,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:4}),new THREE.MeshLambertMaterial({color:16777215,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:4})]),o=new THREE.PlaneGeometry(t,t,n,n),u=o.faces.length/2,a=0;u>a;a++)s=2*a,o.faces[s].materialIndex=(a+Math.floor(a/n))%2,o.faces[s+1].materialIndex=(a+Math.floor(a/n))%2;l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,o,r),this.rotation.z=Math.PI/8,this.position.z=-.05,r=o=null}return o(e,t),e}(THREE.Mesh),m=function(t){function e(t,n,r){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var o,a;o=new THREE.MeshBasicMaterial({color:2959463,side:THREE.BackSide,map:u.WALLPAPER}),a=new f["default"](t,n,r),this.add(new THREE.Mesh(a,o)),u.BASEBOARD.wrapT=THREE.RepeatWrapping,u.BASEBOARD.repeat.set(2,1),o=new THREE.MeshBasicMaterial({color:11184810,side:THREE.BackSide,map:u.BASEBOARD}),a=new f["default"](t,.04*n,r-.05),this.add(new THREE.Mesh(a,o))}return o(e,t),e}(THREE.Object3D),T=function(t){function e(t,n){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.amount=t,this.apothem=n}return o(e,t),c(e,[{key:"setCurtains",value:function(t){var e,n,r,i,o;for(r=new THREE.PlaneBufferGeometry(t,t,1,1),i=new THREE.MeshBasicMaterial({color:15658734,side:THREE.FrontSide,map:u.CURTAIN,transparent:!0}),e=.5;e<this.amount;e++)n=2*Math.PI*e/this.amount,o=new THREE.Mesh(r,i),o.rotation.x=Math.PI/2,o.rotation.y=-n,o.position.x=this.apothem*Math.sin(n),o.position.y=this.apothem*Math.cos(n),o.position.z=t/2-1,this.add(o);return i=null,r=null,o=null,this}},{key:"setCarpets",value:function(t,e){var n,r,i,o,a;for(u.REDCARPET.wrapT=THREE.RepeatWrapping,u.REDCARPET.repeat.set(1,3),o=new THREE.MeshLambertMaterial({color:16777215,side:THREE.FrontSide,map:u.REDCARPET}),i=new THREE.PlaneBufferGeometry(t,e,1,1),n=.5;n<this.amount;n++)r=n/this.amount*2*Math.PI,a=new THREE.Mesh(i,o),a.rotation.z=r,a.position.x=(this.apothem-e/2)*Math.sin(-r),a.position.y=(this.apothem-e/2)*Math.cos(r),a.position.z=.05,this.add(a);return o=null,i=null,a=null,this}},{key:"setPillars",value:function(t,e){var n,r,i,o,a,s,c;for(n=u.COLUMN,n.wrapT=THREE.RepeatWrapping,n.repeat.set(1,2),r=new THREE.MeshBasicMaterial({color:16777215,side:THREE.FrontSide,map:n}),i=new f["default"](4,e,t),s=[0,.17578125,.4453125,.73046875,1],a=0;4>a;a++)i.attributes.uv.array[12*a+0]=s[a+1],i.attributes.uv.array[12*a+1]=1,i.attributes.uv.array[12*a+2]=s[a],i.attributes.uv.array[12*a+3]=1,i.attributes.uv.array[12*a+4]=s[a],i.attributes.uv.array[12*a+5]=0,i.attributes.uv.array[12*a+6]=s[a],i.attributes.uv.array[12*a+7]=0,i.attributes.uv.array[12*a+8]=s[a+1],i.attributes.uv.array[12*a+9]=0,i.attributes.uv.array[12*a+10]=s[a+1],i.attributes.uv.array[12*a+11]=1;for(c=Math.atan(.46*Math.tan(Math.PI/this.amount)),a=0;a<this.amount;a++)s=2*Math.PI*a/this.amount,o=new THREE.Mesh(i,r),o.rotation.z=Math.PI/2-s,o.position.x=this.apothem*Math.sin(s+c),o.position.y=this.apothem*Math.cos(s+c),this.add(o),o=new THREE.Mesh(i,r),o.rotation.z=Math.PI/2-s,o.position.x=this.apothem*Math.sin(s-c),o.position.y=this.apothem*Math.cos(s-c),this.add(o);return n=null,r=null,i=null,o=null,this}}]),e}(THREE.Object3D),b=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var t,n,r;t=new THREE.MeshBasicMaterial({color:16777215,side:THREE.FrontSide,map:u.REDCARPET}),n=new d["default"](17.5,27.5,32),r=new THREE.Mesh(n,t),r.position.z=1,this.add(r),t=new THREE.MeshBasicMaterial({color:0,side:THREE.FrontSide}),n=new THREE.CylinderGeometry(27.5,27.5,1,32,1,!0),r=new THREE.Mesh(n,t),r.rotation.x=Math.PI/2,r.rotation.y=11.25*Math.PI/180,r.position.z=.5,this.add(r),t=null,n=null,r=null}return o(e,t),e}(THREE.Object3D),H=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var t,n,r,o,a,s,c;for(t=u.WOOD,n=new THREE.MeshLambertMaterial({color:16777215,emissive:3355443,side:THREE.BackSide,map:t}),r=new THREE.CylinderGeometry(17.5,15.5,1,16,1,!0),r.faceVertexUvs[0]=[],s=[new THREE.Vector2(0,1),new THREE.Vector2(0,0),new THREE.Vector2(1,1)],c=[new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(1,1)],a=0;16>a;a++)r.faceVertexUvs[0].push(s),r.faceVertexUvs[0].push(c);for(o=new THREE.Mesh(r,n),o.name="platfront",o.rotation.x=Math.PI/2,o.rotation.y=11.25*Math.PI/180,o.position.z=.5,this.add(o),n=new THREE.MeshLambertMaterial({color:16777215,emissive:2236962,side:THREE.FrontSide,map:t}),r=[new y["default"](17,1),new THREE.BoxGeometry(7,1.5,1),new THREE.BoxGeometry(7,1.2,1)],a=0;16>a;a++)o=new THREE.Mesh(r[0],n),o.rotation.z=360*(a+.5)/16*Math.PI/180,this.add(o),o=new THREE.Mesh(r[1],n),o.rotation.z=(90+360*a/16)*Math.PI/180,o.position.x=19.1*Math.cos(a/8*Math.PI),o.position.y=19.1*Math.sin(a/8*Math.PI),o.position.z=9.8,this.add(o),o=new THREE.Mesh(r[2],n),o.rotation.z=(90+360*a/16)*Math.PI/180,o.position.x=17.5*Math.cos(a/8*Math.PI),o.position.y=17.5*Math.sin(a/8*Math.PI),o.position.z=1.6,this.add(o);t=u.CLOUDS,t.wrapT=t.wrapS=THREE.RepeatWrapping,t.repeat.set(30,1),n=new THREE.MeshLambertMaterial({color:3377551,emissive:3377551,side:THREE.FrontSide,map:t}),r=new THREE.TorusGeometry(16.2,.35,10,80),o=new THREE.Mesh(r,n),o.position.z=10.1,this.add(o),t=n=r=o=null}return o(e,t),e}(THREE.Object3D);Object.defineProperties(v,{TEXTURE_RELATIVE_URI:{value:"/resources/textures/"},CylinderBufferGeometry:{value:f["default"]},PlatformBufferGeometry:{value:d["default"]},StandGeometry:{value:y["default"]},Floor:{value:w},Walls:{value:m},Exits:{value:T},Platform:{value:b},TrialStands:{value:H}}),n["default"]=v,e.exports=n["default"]},{"./CylinderBufferGeometry.js":8,"./PlatformBufferGeometry.js":15,"./StandGeometry.js":16}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},a=function(t){function e(t,n,i){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.type="CylinderBufferGeometry";var a,s,u,c,l,h=i/Math.cos(Math.PI/t),f=2*Math.PI/t,p=new Float32Array(6*t*3),d=new Float32Array(6*t*2);for(a=0;t>=a;a++)s=h*Math.cos(f*(a-.5)),u=h*Math.sin(f*(a-.5)),c=h*Math.cos(f*(a+.5)),l=h*Math.sin(f*(a+.5)),d[12*a+0]=1,d[12*a+1]=1,p[18*a+0]=c,p[18*a+1]=l,p[18*a+2]=n,d[12*a+2]=0,d[12*a+3]=1,p[18*a+3]=s,p[18*a+4]=u,p[18*a+5]=n,d[12*a+4]=0,d[12*a+5]=0,p[18*a+6]=s,p[18*a+7]=u,p[18*a+8]=0,d[12*a+6]=0,d[12*a+7]=0,p[18*a+9]=s,p[18*a+10]=u,p[18*a+11]=0,d[12*a+8]=1,d[12*a+9]=0,p[18*a+12]=c,p[18*a+13]=l,p[18*a+14]=0,d[12*a+10]=1,d[12*a+11]=1,p[18*a+15]=c,p[18*a+16]=l,p[18*a+17]=n;this.addAttribute("position",new THREE.BufferAttribute(p,3)),this.addAttribute("uv",new THREE.BufferAttribute(d,2)),s=u=null,c=l=null,d=null,p=null}return i(e,t),e}(THREE.BufferGeometry);n["default"]=a,e.exports=n["default"]},{}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./HUDElement.js"),s=r(a),u=function(){function t(e,n){i(this,t);var r=document.createElement("canvas"),o=r.getContext("2d");r.width=e,r.height=n,this.W=e,this.H=n,this.ctx=o,this.canvas=r,this.children=[],o=r=null}return o(t,[{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("HUD.add: object can't be added as a child of itself.",t),this):(t instanceof s["default"]?(void 0!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("HUDElement.add: object not an instance of HUDElement.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);-1!==n&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))}},{key:"getChildrenByType",value:function(t){for(var e=[],n=this.children.length;n--;)this.children[n].type==t&&e.push(this.children[n]),this.children[n].children.length>0&&(e=e.concat(this.children[n].getChildrenByType(t)));return e}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.W,this.H)}},{key:"blackScreen",value:function(t){this.ctx.clearRect(0,0,this.W,this.H),this.ctx.beginPath(),this.ctx.fillStyle="rgba(0, 0, 0, "+t+")",this.ctx.rect(0,0,this.W,this.H),this.ctx.fill()}},{key:"draw",value:function(t){for(var e=this.children.length;e--;)this.children[e].draw(t)}}]),t}();n["default"]=u,e.exports=n["default"]},{"./HUDElement.js":11}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},u=t("./HUDInterface.js"),c=r(u),l=t("./HUDTextElement.js"),f=r(l),p=function(t){function e(t){i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.gradients=function(){var e=t.canvas.width,n=t.createLinearGradient(0,0,e,0),r=t.createLinearGradient(0,0,e,0),i=t.createLinearGradient(0,0,e,0);return n.addColorStop(0,"#CC0000"),n.addColorStop(.65,"rgb(255, 51, 51)"),n.addColorStop(.75,"rgba(255, 51, 51, 0)"),r.addColorStop(.65,"rgb(255, 51, 51)"),r.addColorStop(.75,"rgba(255, 51, 51, 0)"),i.addColorStop(.65,"rgb(255, 51, 51)"),i.addColorStop(.75,"rgba(255, 51, 51, 0)"),{labels:{discussionProtag:n,discussionLeft:r,discussionRight:i}}}(),this.textElement=new f["default"](t),this.add(this.textElement)}return o(e,t),a(e,[{key:"setText",value:function(t){this.textElement.text=t}},{key:"setSpeaker",value:function(t){this.textElement.speaker=t}},{key:"drawBackground",value:function(){this.ctx.clearRect(0,0,this.W,this.H),this.ctx.save(),this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.fillRect(0,.68*this.H,this.W,.32*this.H),this.ctx.beginPath(),this.ctx.rect(0,.62*this.H,this.W,.06*this.H),this.ctx.fillStyle=this.gradients.labels.discussionLeft,this.ctx.fill(),this.ctx.fillStyle="white",this.ctx.fillRect(0,.68*this.H,this.W,.02*this.H),this.ctx.fillStyle="#FF0066",this.ctx.fillRect(0,.7*this.H,this.W,.01*this.H),this.ctx.restore()}},{key:"drawDialogue",value:function(t){this.ctx.save(),this.ctx.fillStyle="white",this.ctx.font=.06*h+"px Calibri",writeLine(t,.8*h,.94*w),this.ctx.restore()}},{key:"draw",value:function(){this.drawBackground()}}]),e}(c["default"]);p.COLOR_NARRATOR="#47FF19",p.COLOR_CHARACTER="white",n["default"]=p,e.exports=n["default"]},{"./HUDInterface.js":12,"./HUDTextElement.js":14}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.type="HUDElement",this.ctx=e,this.W=e.canvas.width,this.H=e.canvas.height,this.relative_x=0,this.relative_y=0,this.visible=!0,this.opacity=1,this.parent=void 0,this.children=[],this.events={}}return i(t,[{key:"add",value:function(e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("HUDElement.add: object can't be added as a child of itself.",e),this):(e instanceof t?(void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("HUDElement.add: object not an instance of HUDElement.",e),this)}},{key:"remove",value:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);-1!==n&&(t.parent=void 0,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))}},{key:"getChildrenByType",value:function(t){for(var e=[],n=this.children.length;n--;)this.children[n].type==t&&e.push(this.children[n]),this.children[n].children.length>0&&(e=e.concat(this.children[n].getChildrenByType(t)));return e}},{key:"getChildByType",value:function(t){for(var e,n=0,r=this.children.length,n=0;n<this.children.length;n++){if(this.children[r].type==t)return this.children[r];if(this.children[r].children.length>0&&(e=this.children[r].getChildByType(t)))return e}}},{key:"dispatchEvent",value:function(t){t.type in this.events&&this.events[t.type].forEach(function(e){e(t)})}},{key:"listenEvent",value:function(t,e){t in this.events||(this.events[t]=[]),this.events[t].push(e)}},{key:"draw",value:function(t){throw new Error("HUDElement.draw: Method not implemented.",this.type)}}]),t}();n["default"]=o,e.exports=n["default"]},{}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},s=t("./HUDElement.js"),u=r(s),c=function(t){function e(t){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),e}(u["default"]);n["default"]=c,e.exports=n["default"]},{"./HUDElement.js":11}],13:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);
}Object.defineProperty(n,"__esModule",{value:!0});var a=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},s=t("./HUDInterface.js"),u=r(s),c=function(t){function e(t){i(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return o(e,t),e}(u["default"]);n["default"]=c,e.exports=n["default"]},{"./HUDInterface.js":12}],14:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},c=t("./HUDElement.js"),l=r(c),h=function(t){function e(t,n,r){o(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.type="HUDTextElement",this.text=n}return a(e,t),s(e,[{key:"draw",value:function(t){this.ctx.save(),this.ctx.fillStyle=this.color,this.ctx.font=.06*this.H+"px Calibri",this.writeLine(this.ctx,.8*this.H,.94*this.W),this.ctx.restore()}},{key:"writeLine",value:function(t,e,n){for(var r=this.text,i="",o=this.ctx.measureText(r).width,a=r.split(" "),s=[];o>n;)i=a.pop(),s.unshift(i),r=a.join(" "),o=this.ctx.measureText(r).width;if(!(a.length>0))throw new Error("El texto contiene una palabra más ancha que el ancho máximo del canvas.");t.fillText(r,.03*this.W,e),s.length>0&&this.writeLine(s.join(" "),e+.08*this.H),i=null,o=null,a=null,s=null}},{key:"draw2",value:function(t){var e=text.substr(this.textAdvance),n=(e.indexOf(" ")+1||text.length+1)-1,r=this.ctx.measureText(e.substring(0,n)).width,o=t.measureText(str.charAt(i)).width;cursorX+r>=canvas.width-padding&&(cursorX=startX,cursorY+=lineHeight),t.fillText(str.charAt(i),cursorX,cursorY),i++,cursorX+=o}},{key:"speaker",set:function(t){"narrator"==t?this.color="#47FF19":this.color="white"}}]),e}(l["default"]);n["default"]=h,e.exports=n["default"]},{"./HUDElement.js":11}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},a=function(t){function e(t,n,i){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.type="PlatformBufferGeometry",t=t||20,n=n||31,i=i||32;var a,s,u,c,l,h=2*Math.PI/i,f=new Float32Array(6*i*3),p=new Float32Array(6*i*2);for(a=0;i>a;a++)s=Math.cos(h*a),u=Math.sin(h*a),c=Math.cos(h*(a+1)),l=Math.sin(h*(a+1)),p[12*a+0]=0,p[12*a+1]=0,f[18*a+0]=t*s,f[18*a+1]=t*u,f[18*a+2]=0,p[12*a+2]=1,p[12*a+3]=0,f[18*a+3]=n*s,f[18*a+4]=n*u,f[18*a+5]=0,p[12*a+4]=1,p[12*a+5]=1,f[18*a+6]=n*c,f[18*a+7]=n*l,f[18*a+8]=0,p[12*a+6]=1,p[12*a+7]=1,f[18*a+9]=n*c,f[18*a+10]=n*l,f[18*a+11]=0,p[12*a+8]=0,p[12*a+9]=1,f[18*a+12]=t*c,f[18*a+13]=t*l,f[18*a+14]=0,p[12*a+10]=0,p[12*a+11]=0,f[18*a+15]=t*s,f[18*a+16]=t*u,f[18*a+17]=0;this.addAttribute("position",new THREE.BufferAttribute(f,3)),this.addAttribute("uv",new THREE.BufferAttribute(p,2)),s=u=null,c=l=null,p=null,f=null}return i(e,t),e}(THREE.BufferGeometry);n["default"]=a,e.exports=n["default"]},{}],16:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(t,e,n){for(var r=!0;r;){var i=t,o=e,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=a,r=!0,s=c=void 0}},a=function(t){function e(t,n){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.vertices.push(new THREE.Vector3(.8,t-2,n+10.2),new THREE.Vector3(-.8,t-2,n+10.2),new THREE.Vector3(-.8,t-2,n+8.7),new THREE.Vector3(.8,t-2,n+8.7),new THREE.Vector3(.8,t+4,n+10.2),new THREE.Vector3(-.8,t+4,n+10.2),new THREE.Vector3(-.8,t+4,n+8.5),new THREE.Vector3(.8,t+4,n+8.5),new THREE.Vector3(.8,t+0,n+7.5),new THREE.Vector3(-.8,t+0,n+7.5),new THREE.Vector3(-.8,t+3,n+7.5),new THREE.Vector3(.8,t+3,n+7.5)),this.faces.push(new THREE.Face3(0,1,2),new THREE.Face3(2,3,0),new THREE.Face3(3,2,9),new THREE.Face3(9,8,3),new THREE.Face3(4,5,1),new THREE.Face3(1,0,4),new THREE.Face3(4,0,3),new THREE.Face3(3,7,4),new THREE.Face3(7,3,8),new THREE.Face3(8,11,7),new THREE.Face3(1,5,6),new THREE.Face3(6,2,1),new THREE.Face3(2,6,10),new THREE.Face3(10,9,2),new THREE.Face3(5,4,7),new THREE.Face3(7,6,5),new THREE.Face3(6,7,11),new THREE.Face3(11,10,6),new THREE.Face3(8,9,10),new THREE.Face3(10,11,8)),this.vertices.push(new THREE.Vector3(.6,t+.2,n+7.5),new THREE.Vector3(-.6,t+.2,n+7.5),new THREE.Vector3(-.6,t+.2,n+1.1),new THREE.Vector3(.6,t+.2,n+1.1),new THREE.Vector3(-.6,t+2.8,n+7.5),new THREE.Vector3(.6,t+2.8,n+7.5),new THREE.Vector3(.6,t+2.8,n+1.1),new THREE.Vector3(-.6,t+2.8,n+1.1)),this.faces.push(new THREE.Face3(12,13,14),new THREE.Face3(14,15,12),new THREE.Face3(16,17,18),new THREE.Face3(18,19,16),new THREE.Face3(17,12,15),new THREE.Face3(15,18,17),new THREE.Face3(13,16,19),new THREE.Face3(19,14,13)),this.vertices.push(new THREE.Vector3(.8,t+0,n+1.4),new THREE.Vector3(-.8,t+0,n+1.4),new THREE.Vector3(-.8,t+0,n+0),new THREE.Vector3(.8,t+0,n+0),new THREE.Vector3(-.8,t+3,n+1.4),new THREE.Vector3(.8,t+3,n+1.4),new THREE.Vector3(.8,t+4,n+.7),new THREE.Vector3(-.8,t+4,n+.7),new THREE.Vector3(.8,t+4,n+0),new THREE.Vector3(-.8,t+4,n+0)),this.faces.push(new THREE.Face3(20,21,22),new THREE.Face3(22,23,20),new THREE.Face3(25,24,21),new THREE.Face3(21,20,25),new THREE.Face3(20,23,28),new THREE.Face3(28,26,20),new THREE.Face3(26,25,20),new THREE.Face3(24,25,26),new THREE.Face3(26,27,24),new THREE.Face3(27,26,28),new THREE.Face3(28,29,27),new THREE.Face3(21,24,27),new THREE.Face3(21,27,29),new THREE.Face3(21,29,22));var i=this.faces.length/2,a=[new THREE.Vector2(0,1),new THREE.Vector2(0,0),new THREE.Vector2(1,1)],s=[new THREE.Vector2(0,0),new THREE.Vector2(1,0),new THREE.Vector2(1,1)];for(this.faceVertexUvs[0]=[];i--;)this.faceVertexUvs[0].push(a,s);this.computeFaceNormals(),this.computeVertexNormals()}return i(e,t),e}(THREE.Geometry);n["default"]=a,e.exports=n["default"]},{}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./Animacion.js"),s=(r(a),t("./Character.js")),u=r(s),c=t("./HUD.js"),l=r(c),h=t("./HUDDiscussionInterface.js"),f=r(h),p=t("./HUDNSDInterface.js"),d=r(p),E=function(){function t(e,n){i(this,t),this.WIDTH=e,this.HEIGHT=n,this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(0,1),this.renderer.setSize(e,n),this.scene=new THREE.Scene,this.cameras=[],this.characters={};var r=new THREE.PointLight(16777215,1.5,130);r.position.set(0,0,30),this.scene.add(r),this.createCamera()}return o(t,[{key:"createCamera",value:function(t){var e=new THREE.PerspectiveCamera(40,this.WIDTH/this.HEIGHT,1,300);e.position.set(10,10,10),e.lookAt(new THREE.Vector3(0,0,10)),this.cameras.push(e),this.scene.add(e),this.mainCamera=e}},{key:"setCharacter",value:function(t,e){t&&(t=new u["default"](t,e),this.scene.add(t.card))}},{key:"changeStage",value:function(t){var e;switch(this.hud.getChildrenByType("interface").forEach(this.hud.remove,this.hud),t){case"nsd":e=new d["default"](this.hud.ctx);break;case"discussion":default:e=new f["default"](this.hud.ctx)}return this.hud.add(e),e}},{key:"appendCanvasTo",value:function(t){return("string"==typeof t?document.querySelector(t):t).appendChild(this.renderer.domElement),this}},{key:"setupHUD",value:function(t,e){return this.hud=new l["default"](this.WIDTH,this.HEIGHT),this.hud.canvas.id=e||"hud",document.querySelector(t).appendChild(this.hud.canvas),this}},{key:"render",value:function(){this.renderer.render(this.scene,this.mainCamera)}},{key:"renderHalf",value:function(){this.renderer.setViewport(0,0,this.WIDTH,this.HEIGHT),this.renderer.clear(),this.renderer.setViewport(1,1,.5*this.WIDTH-2,this.HEIGHT-2),this.renderer.render(this.scene,this.mainCamera),this.renderer.setViewport(.5*this.WIDTH+1,1,.5*this.WIDTH-2,this.HEIGHT-2),this.renderer.render(this.scene,this.rightCamera)}},{key:"courtroom",set:function(t){this.scene.add(t)}}]),t}();n["default"]=E,e.exports=n["default"]},{"./Animacion.js":4,"./Character.js":5,"./HUD.js":9,"./HUDDiscussionInterface.js":10,"./HUDNSDInterface.js":13}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return-t*(t-2)},inOutQuad:function(t){return.5*((t*=2)<1?t*t:t*(2-t)-2)},inCubic:function(t){return t*t*t},outCubic:function(t){return Math.pow(t-1,3)+1},inOutCubic:function(t){return.5*((t*=2)<1?t*t*t:Math.pow(2*t-2,3)+2)},inSine:function(t){return 1-Math.cos(t*Math.PI/2)},outSine:function(t){return Math.sin(t*Math.PI/2)},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return Math.pow(1024,t-1)},easeOutExpo:function(t){return 1.0009765626-Math.pow(1024,-t)},easeInOutExpo:function(t){return.5*((t*=2)<1?Math.pow(1024,t-1):2-Math.pow(1024,1-t))}},e.exports=n["default"]},{}],19:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Coordenada.js"),o=r(i);n["default"]={Position:function(t){var e=t.trial,n=new Trayectoria({start:new o["default"](t.position.start||e.mainCamera.position),end:new o["default"](t.position.end||t.position),route:t.position.route||t.route});this.apply=function(t){e.mainCamera.position.copy(n.getVector(t))},t=null},LookAt:function(t){var e=t.trial,n=new Trayectoria({start:new o["default"](t.lookat.start||new THREE.Vector3(0,0,-10).applyMatrix4(e.mainCamera.matrixWorld)),end:new o["default"](t.lookat.end||t.lookat),route:t.lookat.route||t.route});this.apply=function(t){e.mainCamera.lookAt(n.getVectorThree(t))},t=null},Up:function(t){var e=t.trial,n=new Trayectoria({start:new o["default"](t.up.start||e.mainCamera.up),end:new o["default"](t.up.end||t.up),route:t.up.route||t.route});this.apply=function(t){e.mainCamera.up.copy(n.getVector(t))},t=null},FOV:function(t){var e=t.trial,n=t.fov.start||e.mainCamera.fov,r=(t.fov.end||t.fov)-n;this.apply=function(t){e.mainCamera.fov=n+r*t,e.mainCamera.updateProjectionMatrix()},t=null}},e.exports=n["default"]},{"./Coordenada.js":6}]},{},[2]);
//# sourceMappingURL=example/bundle.js.map
